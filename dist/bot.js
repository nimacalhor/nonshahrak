"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const telegraf_1 = require("telegraf");
const bot_middlewares_1 = require("./bot-middlewares");
const init_1 = require("./controller/bot/init");
const token = process.env.MAIN_BOT_TOKEN;
const bot = new telegraf_1.Telegraf(token);
const { keywordControllersList, queryControllersList, returnControllersList, stateControllersList, } = (0, init_1.init)(bot);
bot.use(bot_middlewares_1.setUserId);
bot.use(bot_middlewares_1.setQuery);
bot.use((0, bot_middlewares_1.queryMw)(queryControllersList, init_1.runController));
bot.use(bot_middlewares_1.setEntry);
bot.use((0, bot_middlewares_1.keywordMw)(keywordControllersList, init_1.runController));
bot.use(bot_middlewares_1.setSession);
bot.use(bot_middlewares_1.setIsOrderTypeTomorrow);
bot.use(bot_middlewares_1.validateStateExistence);
bot.use((0, bot_middlewares_1.returnMw)(returnControllersList, init_1.runController));
bot.use((0, bot_middlewares_1.stateMw)(stateControllersList, init_1.runController));
console.log("bot configured");
exports.default = bot;
